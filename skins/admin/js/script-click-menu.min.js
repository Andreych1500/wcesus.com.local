$(document).ready(function(){$(".lang-info").click(function(){var c=$(".lang-open-click");if($(c).css("display")=="none"){c.css({left:$(this).offset().left-148,top:$(this).offset().top+50}).slideDown("middle")}if($(c).css("display")=="block"){$(document).mouseup(function(d){if(!$(c).is(d.target)&&$(c).has(d.target).length===0){$(c).slideUp("middle")}return false})}});$(".navigation li").click(function(){var c=widthScroll_Y();var d=$(window).outerWidth(true)+c;if($(".active-section").length==0){$.cookie("act-menu",$(this).index(),{expires:14,path:"/"})}if($(this).is(".act-navigation")){$.removeCookie("act-menu",{path:"/"});$(this).removeAttr("class");$(".navigation-lv2").removeClass("act-nav-lv2");$(".section-lv2").removeClass("act-section")}else{$.cookie("act-menu",$(this).index(),{expires:14,path:"/"});$(".navigation .act-navigation").removeAttr("class");$(this).addClass("act-navigation");$(".navigation-lv2").addClass("act-nav-lv2");$(".section-lv2").removeClass("act-section").eq($(this).index()).addClass("act-section")}});$(".list-sec-menu").click(function(g){if(g.target.className=="list-sec-menu"||"act-list"){var f=$(g.target);var d=$(f).parent(".section-lv2").index()+":"+$(f).index();var c=[];if($(f).is(".act-list")){$(f).find(".section-module").slideUp("middle",function(){$(f).removeClass("act-list")})}else{$(f).find(".section-module").slideDown("middle",function(){$(f).addClass("act-list")})}if($.cookie("act-menu-lv2")!==undefined){var h=JSON.parse($.cookie("act-menu-lv2"));if($.inArray(d,h)>=0){h=$.grep(h,function(e){return e!==d});if(h.length<=0){$.removeCookie("act-menu-lv2",{path:"/"})}else{$.cookie("act-menu-lv2",JSON.stringify(h),{expires:14,path:"/"})}}else{h.push(d);$.cookie("act-menu-lv2",JSON.stringify(h),{expires:14,path:"/"})}}else{c.push(d);$.cookie("act-menu-lv2",JSON.stringify(c),{expires:14,path:"/"})}}});$(".to-admin").click(function(){$.removeCookie("active-menu",{path:"/"})});$(".tabs-panel li").click(function(){$(".tabs-panel li").removeAttr("class");$(this).addClass("active-tab");$(".content-form .tabs").removeClass("active-block-tabs").eq($(this).index()).addClass("active-block-tabs")});$('.reload-file[href$="?backup=ok"]').click(function(){if($(".operation-info").length==0){var c=$(this).attr("data-lang-text");setTimeout(function(){$(".bottom-table").append('<div class="operation-info">'+c+'<img src="/skins/admin/img/load.gif" alt="loading"></div>');$(".operation-info").slideDown("middle")},600)}});$(".add-el-list").click(function(){if($(this).attr("data-type")=="text"){$(this).before('<input type="'+$(this).attr("data-type")+'" name="'+$(this).attr("data-name")+'" value="" '+$(this).attr("data-attr")+">")}if($(this).attr("data-type")=="textarea"){$(this).before('<textarea name="'+$(this).attr("data-name")+'" '+$(this).attr("data-attr")+"></textarea>")}});$('input[name="all_cheked"]').click(function(){if($(this).is(":checked")==true){$(".illustration-table tr:not(:first-child) td:first-child input").each(function(){$(this).prop("checked",true).parents("tr").addClass("c-checked")})}else{$(".illustration-table tr:not(:first-child) td:first-child input").each(function(){$(this).prop("checked",false).parents("tr").removeClass("c-checked")})}});$('.technik-off-onn input[name="all_cheked"]').click(function(){if($(this).is(":checked")==true){$('div[data-result="tables"] input[type="checkbox"]').each(function(){$(this).prop("checked",true)})}else{$('div[data-result="tables"] input[type="checkbox"]').each(function(){$(this).prop("checked",false)})}});$('.illustration-table tr:not(:first-child) td:first-child input[type="checkbox"]').click(function(){if($(this).is(":checked")==true){$(this).parents("tr").addClass("c-checked")}else{$(this).parents("tr").removeClass("c-checked")}});$(".illustration-table tr:not(:first-child) td:not(:first-child)").dblclick(function(){if($(this).parents(".c-checked").length==0){var c=$(this).parents("tr").find('.menu-update a[href*="?edit="], a:first-child').attr("href");if(c!==undefined){document.location.href=c}}});$(".add-field-filter").click(function(){var c=$(".filter-option-list");if($(c).css("display")=="none"){$(this).before('<span class="triangle"></span>');$(c).slideDown("middle")}if($(c).css("display")=="block"){$(document).mouseup(function(d){if(!$(c).is(d.target)&&$(c).has(d.target).length===0){$(c).slideUp("middle",function(){$(".triangle").remove()})}return false})}});$(".filter-option-list div").click(function(){var c=$(this).attr("data-index");var d=[];if($(this).is(".act-option")){$(this).removeClass("act-option");$('.filter .input-value[data-index="'+c+'"]').fadeOut("slow",function(){if($(this).find("input").length){$(this).find('input[name^="find_"]').attr("value","")}else{if($(this).find("select").length){$(this).find("select option").removeAttr("selected").eq(0).attr("selected",true)}}$(this).find("input, select").attr("disabled",true)})}else{$(this).addClass("act-option");$('.filter .input-value[data-index="'+c+'"]').fadeIn("slow",function(){$(this).find("input, select").attr("disabled",false)})}if($.cookie("filter")!==undefined){var e=JSON.parse($.cookie("filter"));if($.inArray(c,e)>=0){e=$.grep(e,function(f){return f!==c});if(e.length<=0){$.removeCookie("filter",{path:window.location.pathname})}else{$.cookie("filter",JSON.stringify(e),{expires:30,path:window.location.pathname})}}else{e.push(c);$.cookie("filter",JSON.stringify(e),{expires:30,path:window.location.pathname})}}else{d.push(c);$.cookie("filter",JSON.stringify(d),{expires:30,path:window.location.pathname})}});$(".count_el_page").click(function(){var c=$(this).find(".selected");if($(c).css("display")=="none"){c.slideDown("middle");$(this).addClass("open-list")}if($(c).css("display")=="block"){$(document).mouseup(function(d){if(!$(c).is(d.target)&&$(c).has(d.target).length===0){$(c).slideUp("middle");$(".count_el_page").removeClass("open-list")}return false})}});$(".count_el_page .selected span").click(function(){var c=parseInt($(this).text());if(c){$.cookie("count_el_page",JSON.stringify(c),{expires:30,path:window.location.pathname});window.location.reload()}});$('.illustration-table input[name^="ids"], input[name="all_cheked"]').click(function(){if($(".illustration-table tr:not(:first-child) td:first-child input:checked").length>0){var c=$(".dynamicEdit");c.addClass("dynamicEdit-act").attr("onclick",'editElements("'+c.attr("data-submit-lang")+'")')}else{$(".dynamicEdit").removeClass("dynamicEdit-act").removeAttr("onclick")}});var b=$('input[data-symbol-code="ok"]');if(b.length>0){var a=$('input[name="symbol_code"]');b.keyup(function(){if(a.val()!==undefined){a.val((translit(b.val().toLowerCase())).replace(/\s/g,"-").replace(/\*/g,"-").replace(/</g,"-").replace(/>/g,"-").replace(/\//g,"-").replace(/\)/g,"").replace(/\(/g,""))}})}$('select[name="type_import"]').change(function(){if($(this).val()=="csv"){$('select[name="what_option"] option:not([disabled])').attr("disabled",true).hide();$('option[data-option="csv"]').removeAttr("disabled").attr("selected",true).show().trigger("click")}else{$('select[name="what_option"] option[disabled]').removeAttr("disabled").show();$('select[name="what_option"] option:first-child').attr("selected",true);$('option[data-option="csv"]').attr("disabled",true).attr("selected",false).hide()}});if($('div[data-get-dbTable-ajax="ok"]').length>0){getDataBaseTable()}});function getDataBaseTable(){$.ajax({url:"/admin/setting/export-db/?ajax=ok",type:"POST",data:{},cache:false,success:function(a){var c=JSON.parse(a);if(c.error===undefined){var b="";for(var d in c){b+='<label><input type="checkbox" name="tables[]" value="'+c[d]+'">'+c[d]+"</label>"}$('div[data-result="tables"]').html(b)}else{$('div[data-result="tables"]').html("Error Result!")}}})}function getIdElement(a){$("#control").attr("data-input",$(a).parent(".upload_file").attr("id")).trigger("click")}function resetFile(a){a.replaceWith(a.clone(true))}function removeImage(c){var b=$(c).parents(".upload_file");var d=$("#control").attr("data-name-submit");b.find("button + input").val("");b.find("button").html('<span class="icon-link"></span>'+d).attr("onclick","getIdElement(this)");b.find(".photos").addClass("hidden").find("img").removeAttr("src");if(b.find('input[name^="del"]').val()!=""){var a=b.find('input[name^="del"]').val()}if(a!==undefined&&a.length>0){$.ajax({url:"/admin/setting/personal-interface/?delPhoto=ok&ajax=ok",type:"POST",data:{file_delete:a},cache:false})}}function modalResizeImage(e,d){var a=$("#caption");var f=$("#control").attr("data-name-submit");var c=d;var g=(($.cookie("autoResizeImage")!==undefined)?"active":"");var b='<div id="modalResizeImage" class="modalResizeImage"><span class="close">&times;</span><div id="img" class="modal-content"><img src=""></div><div class="resize-image"><span class="autoResize icon-link '+g+'"></span><div class="first-block"><i>Width:</i> <input type="number" min="10" name="width" value="'+e.width+'"><div class="submit-no">Remove</div></div><div class="last-block"><i>Height:</i> <input type="number" min="10" name="height" value="'+e.height+'"><div class="submit-ok">Save</div></div></div><div id="caption">'+e.name+"</div></div>";$("main").append(b);$(".modal-content img").attr("src",e.src);$(".modalResizeImage .close, .modalResizeImage .submit-no").click(function(){c.find("button + input").val("");c.find("button").html('<span class="icon-link"></span>'+f).attr("onclick","getIdElement(this)");c.find(".photos").addClass("hidden").find("img").removeAttr("src");$("#modalResizeImage").remove()});$(".autoResize").click(function(){if($.cookie("autoResizeImage")!==undefined){$.removeCookie("autoResizeImage",{path:"/"});$(this).removeClass("active")}else{$.cookie("autoResizeImage","Y",{expires:90,path:"/"});$(this).addClass("active")}});$('.modalResizeImage input[type="number"]').change(function(){var i=parseInt($(".modalResizeImage input[name='width']").val());var h=parseInt($(".modalResizeImage input[name='height']").val());if($(".autoResize").is(".active")){if($(this).attr("name")=="height"){i=parseInt((h*e.width)/e.height);$(".modalResizeImage input[name='width']").val(i)}else{if($(this).attr("name")=="width"){h=parseInt((i*e.height)/e.width);$(".modalResizeImage input[name='height']").val(h)}}}$(".modalResizeImage img").css({width:i,height:h})});$(".submit-ok").click(function(){var j={};var i=parseInt($(".modalResizeImage input[name='width']").val());var h=parseInt($(".modalResizeImage input[name='height']").val());j.image=e.name;j.width=i;j.height=h;$.ajax({url:"/admin/setting/personal-interface/?ajax=ok&imgResize=ok",type:"POST",data:j,cache:false,success:function(k){var l=JSON.parse(k);if(l.error!==undefined){c.find("button + input").val("");c.find("button").html('<span class="icon-link"></span>'+f).attr("onclick","getIdElement(this)");c.find(".photos").addClass("hidden").find("img").removeAttr("src");$("#modalResizeImage").remove();alert(l.error)}else{c.find("button").attr("onclick","getIdElement(this)");c.find(".photos img").attr("src","/uploaded/temporarily/"+e.name).css({width:i});$("#modalResizeImage").remove()}}})})}function addFile(c){if($(c).val().length>1){var a=new FormData($("#to_file")[0]);var d=$("#control").attr("data-name-submit");var b=$("#"+$(c).attr("data-input"));a.append("data-priority-type",b.attr("data-priority-type"));$(b).find("button").removeAttr("onclick").html('<img src="/skins/admin/img/load-line.gif" alt="loading">');$.ajax({url:"/admin/setting/personal-interface/?getType=ok&ajax=ok",type:"POST",data:a,cache:false,contentType:false,processData:false,success:function(f){var g=JSON.parse(f);if(b.find('input[name^="del"]').val()!=""){var e=b.find('input[name^="del"]').val()}if(e!==undefined&&e.length>0){$.ajax({url:"/admin/setting/personal-interface/?delFile=ok&ajax=ok",type:"POST",data:{file_delete:e},cache:false})}if(g.error!==undefined){b.find("button + input").val("");b.find("button").html('<span class="icon-link"></span>'+d).attr("onclick","getIdElement(this)");b.find(".photos").addClass("hidden").find("img").removeAttr("src");alert("Error: "+g.error)}else{if(g.type=="image"){$.ajax({url:"/admin/setting/personal-interface/?addImage=ok&ajax=ok",type:"POST",data:a,cache:false,contentType:false,processData:false,success:function(i){var h=JSON.parse(i);if(h.error!==undefined){b.find("button + input").val("");b.find("button").html('<span class="icon-link"></span>'+d).attr("onclick","getIdElement(this)");b.find(".photos").addClass("hidden").find("img").removeAttr("src");alert("Error: "+h.error)}else{b.find('button + input[type="hidden"]').val(h.image["src"]);b.find("button").html(h.image["name"]);b.find('input[name^="del"]').val(h.image["src"]);b.find(".photos").removeClass("hidden");modalResizeImage(h.image,b)}}})}else{$.ajax({url:"/admin/setting/personal-interface/?addFile=ok&ajax=ok",type:"POST",data:a,cache:false,contentType:false,processData:false,success:function(i){var h=JSON.parse(i);if(h.error!==undefined){b.find("button + input").val("");b.find("button").html('<span class="icon-link"></span>'+d).attr("onclick","getIdElement(this)");alert("Error: "+h.error)}else{b.find('button + input[type="hidden"]').val(h.file);b.find("button").html(h.file).attr("onclick","getIdElement(this)");b.find('input[name^="del"]').val(h.file)}}})}}resetFile($("#control"))}})}}function deleteList(a){var b=window.event;if(b.shiftKey&&b.keyCode==46&&$(a).index()!=0){$(a).remove()}}function openMenuUpdate(a){var b=$(a).siblings(".menu-update");if($(b).css("display")=="none"){b.slideDown("middle").parents("tr").find("td").css("background","#E2E7CB")}if($(b).css("display")=="block"){$(document).mouseup(function(c){if(!$(b).is(c.target)&&$(b).has(c.target).length===0){$(b).slideUp("middle").parents("tr").find("td").removeAttr("style")}return false})}}function okFrom(){return confirm("You agree to action?")}function editElements(a){var d={};var c=[];var b=$(".illustration-table tr:not(:first-child) td:first-child input:checked");var a=a.split("|");$(b).each(function(e,f){c.push($(f).val())});d.id=c;$.ajax({url:window.location.pathname+"?ajax=ok&dynamicEditHtml=ok",type:"POST",data:d,cache:false,success:function(e){var f=JSON.parse(e);if(f.error!==undefined){alert(f.error)}else{$(".dynamicEdit").removeAttr("onclick").removeClass("dynamicEdit").html('<input type="submit" value="'+a[0]+'" name="el-save"><a href="'+document.location.pathname+'" class="no-save">'+a[1]+"</a>");$(".illustration-table").addClass("editTable");$('.illustration-table tr:not(:first-child) td:first-child input, input[name="all_cheked"]').attr("disabled",true);for(var h in f.html){for(var g in f.html[h]){$('.editTable tr[data-id="'+h+'"] td[data-field="'+g+'"]').html(f.html[h][g])}}}}})};