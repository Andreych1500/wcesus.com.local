$(document).ready(function(){$(".clear").click(function(){$("form[data-clear]")[0].reset();var a=$("#fileScan");a.find("button + input").val("");a.find("button").html('<span class="icon-link"></span>Select file').attr("onclick","getIdElement(this)")});$(".add_more").click(function(){var a=$('.upload_file[id^="fileScan_"]');var c=a.length-1;++c;var b='<div class="input-value upload_file" id="fileScan_'+c+'" data-priority-type="img"><button type="button" onclick="getIdElement(this)"><span class="icon-link"></span>Select file</button><input name="fileScan[]" type="hidden" value=""><input name="del[fileScan][]" type="hidden" value=""><div class="photos hidden"><span class="removeFile" onclick="removeImage(this)">x</span><img src=""></div></div>';a.last().after(b)})});function removeImage(c){var b=$(c).parents(".upload_file");var d=$("#control").attr("data-name-submit");b.find("button + input").val("");b.find("button").html('<span class="icon-link"></span>'+d).attr("onclick","getIdElement(this)");b.find(".photos").addClass("hidden").find("img").removeAttr("src");if(b.find('input[name^="del"]').val()!=""){var a=b.find('input[name^="del"]').val()}if(a!==undefined&&a.length>0){$.ajax({url:"/apply/education-history/?delFile=ok&ajax=ok",type:"POST",data:{file_delete:a},cache:false})}}function getIdElement(a){$("#control").attr("data-input",$(a).parent(".upload_file").attr("id")).trigger("click")}function resetFile(a){a.replaceWith(a.clone(true))}function addFile(c){if($(c).val().length>1){var a=new FormData($("#to_file")[0]);var d=$("#control").attr("data-name-submit");var b=$("#"+$(c).attr("data-input"));a.append("data-priority-type",b.attr("data-priority-type"));$.ajax({url:"/apply/education-history/?getType=ok&ajax=ok",type:"POST",data:a,cache:false,contentType:false,processData:false,success:function(f){var g=JSON.parse(f);if(b.find('input[name^="del"]').val()!=""){var e=b.find('input[name^="del"]').val()}if(e!==undefined&&e.length>0){$.ajax({url:"/apply/education-history/?delFile=ok&ajax=ok",type:"POST",data:{file_delete:e},cache:false})}if(g.error!==undefined){b.find("button + input").val("");b.find("button").html('<span class="icon-link"></span>'+d).attr("onclick","getIdElement(this)");b.find(".photos").addClass("hidden").find("img").removeAttr("src");alert("Error: "+g.error)}else{$.ajax({url:"/apply/education-history/?addImage=ok&ajax=ok",type:"POST",data:a,cache:false,contentType:false,processData:false,success:function(i){var h=JSON.parse(i);if(h.error!==undefined){b.find("button + input").val("");b.find("button").html('<span class="icon-link"></span>'+d).attr("onclick","getIdElement(this)");b.find(".photos").addClass("hidden").find("img").removeAttr("src");alert("Error: "+h.error)}else{b.find('button + input[type="hidden"]').val(h.image["src"]);b.find("button").html(h.image["name"]);b.find('input[name^="del"]').val(h.image["src"]);b.find(".photos img").attr("src",h.image["src"]);b.find(".photos").removeClass("hidden")}}})}resetFile($("#control"))}})}};